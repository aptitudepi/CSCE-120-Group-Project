
cmake_minimum_required(VERSION 3.21)
project(HyperlocalWeatherServices VERSION 1.0.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Find Qt6 with all required components
find_package(Qt6 REQUIRED COMPONENTS 
    Core 
    Network 
    Sql 
    HttpServer
    Quick 
    Positioning 
    Location
)

# Enable Qt6 features
qt_standard_project_setup()

# Add subdirectories for each service
add_subdirectory(services/api-gateway)
add_subdirectory(services/weather-data)
add_subdirectory(services/ml-service)
add_subdirectory(services/data-processing)
add_subdirectory(services/location-service)
add_subdirectory(services/alert-service)
add_subdirectory(services/database-service)
add_subdirectory(frontend)

# Create install targets
install(TARGETS 
    ApiGatewayService
    WeatherDataService
    MLService
    DataProcessingService
    LocationService
    AlertService
    DatabaseService
    HyperlocalWeatherApp
    DESTINATION bin
)

# Copy configuration files
install(FILES 
    config/settings.conf
    DESTINATION etc/hyperlocal-weather
)
